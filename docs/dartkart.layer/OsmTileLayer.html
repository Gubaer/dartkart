        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>OsmTileLayer class / dartkart.layer Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="dartkart.layer" data-type="OsmTileLayer">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../dartkart.layer.html">dartkart.layer</a> &rsaquo; <a href="../dartkart.layer/OsmTileLayer.html">OsmTileLayer</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../dartkart.html">dartkart</a></h2><h2><div class="icon-library"></div><a href="../dartkart.core.html">dartkart.core</a></h2><h2><div class="icon-library"></div><a href="../dartkart.geo.html">dartkart.geo</a></h2><h2><div class="icon-library"></div><a href="../dartkart.geometry.html">dartkart.geometry</a></h2><h2><div class="icon-library"></div><a href="../dartkart.layer.html">dartkart.layer</a></h2><ul class="icon">
<li><a href="../dartkart.layer/CanvasRenderer.html"><div class="icon-class"></div>CanvasRenderer</a></li>
<li><a href="../dartkart.layer/ImgGridRenderer.html"><div class="icon-class"></div>ImgGridRenderer</a></li>
<li><a href="../dartkart.layer/Layer.html"><div class="icon-class"></div>Layer</a></li>
<li><div class="icon-class"></div><strong>OsmTileLayer</strong></li>
<li><a href="../dartkart.layer/Renderer.html"><div class="icon-class"></div>Renderer</a></li>
<li><a href="../dartkart.layer/SimpleFeatureLayer.html"><div class="icon-class"></div>SimpleFeatureLayer</a></li>
<li><a href="../dartkart.layer/Tile.html"><div class="icon-class"></div>Tile</a></li>
<li><a href="../dartkart.layer/TileCache.html"><div class="icon-class"></div>TileCache</a></li>
<li><a href="../dartkart.layer/TileLayer.html"><div class="icon-class"></div>TileLayer</a></li>
<li><a href="../dartkart.layer/TileUrlBuilder.html"><div class="icon-interface"></div>TileUrlBuilder</a></li>
<li><a href="../dartkart.layer/WMSLayer.html"><div class="icon-class"></div>WMSLayer</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../dartkart.map.html">dartkart.map</a></h2></div>
<div class="content">
        <h2><strong>OsmTileLayer</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class OsmTileLayer extends TileLayer {


 OsmTileLayer({tileSources, renderer:CANVAS_RENDERER})
     : super(renderer:renderer)
 {
   if (?tileSources) this.tileSources = tileSources;
 }

 List _tileSources = [];

 /// the list of tile sources this layer uses
 List get tileSources =&gt; new List.from(_tileSources);

 /**
  * Set the tile sources where tiles are loaded from.
  *
  * [sources] can be
  *   * [:null:] which results in an empty list of tile sources
  *   * a [String] with a tile URL template
  *   * a [List] of strings, a tile URL template each
  *
  * A *tile URL template* is a string which can include the following
  * macros:
  *   * `{z}` -  bound to the current zoom level when a tile is loaded
  *   * `{x}` -  bound to the x-coordiate of the tile when a tile is loaded
  *   * `{y}` -  bound to the y-coordiate of the tile when a tile is loaded
  */
 set tileSources(sources) {
   if (sources == null) {
     _tileSources = [];
   } else  if (sources is String) {
     _tileSources = [sources];
   } else if (sources is List) {
     sources = sources.where((s) =&gt; s != null);
     if (sources.any((s) =&gt; s is! String)) {
       throw new ArgumentError("Expected list tile source strings, got sources");
     }
     _tileSources = new List.from(sources);
   }
 }

 var _random = new math.Random();

 /// selects a random tile source from the list of configured tile sources
 String get _randomTileSource {
   if (_tileSources.isEmpty) return null;
   if (_tileSources.length == 1) return _tileSources.first;
   return _tileSources[_random.nextInt(_tileSources.length)];
 }

 static final _TEMPLATE_BIND_REGEXP = new RegExp(r"\{\s*(x|y|z)\s*\}");
 bindTileToUrl(int x, int y, int zoom) {
   var source = _randomTileSource;
   return source.splitMapJoin(
     _TEMPLATE_BIND_REGEXP,
     onMatch: (Match m) {
       switch(m.group(1).toLowerCase()) {
         case "x": return x.toString();
         case "y": return y.toString();
         case "z": return zoom.toString();
       }
   });
 }
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../dartkart.layer/Layer.html">Layer</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><a href="../dartkart.layer/TileLayer.html">TileLayer</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>OsmTileLayer</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="OsmTileLayer">
<button class="show-code">Code</button>
new <strong>OsmTileLayer</strong>({tileSources, renderer: CANVAS_RENDERER}) <a class="anchor-link" href="#OsmTileLayer"
              title="Permalink to OsmTileLayer.OsmTileLayer">#</a></h4>
<div class="doc">
<pre class="source">
OsmTileLayer({tileSources, renderer:CANVAS_RENDERER})
   : super(renderer:renderer)
{
 if (?tileSources) this.tileSources = tileSources;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field inherited"><h4 id="container">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_html/DivElement.html">DivElement</a>         <strong>container</strong> <a class="anchor-link"
            href="#container"
            title="Permalink to OsmTileLayer.container">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>The <code>Element</code> this layer uses as container.</p>
<pre class="source">
DivElement get container =&gt; _container;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="domId">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>get domId</strong> <a class="anchor-link" href="#domId"
              title="Permalink to OsmTileLayer.get domId">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>the unique layer id</p>
<pre class="source">
String get domId =&gt; _container.attributes["id"];
</pre>
</div>
</div>
<div class="method inherited"><h4 id="domId=">
<button class="show-code">Code</button>
<strong>set domId</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> value) <a class="anchor-link" href="#domId="
              title="Permalink to OsmTileLayer.set domId">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>Sets the DOM  id on the layer <code>container</code>.</p>
<p>If 
<span class="param">value</span> is null or empty, sets a default id.</p>
<pre class="source">
set domId(String value) {
 if (value != null) value = value.trim();
 if (value == null || value.isEmpty) {
   value = _defaultDOMId();
 }
 _container.attributes["id"] = value;
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="id">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>id</strong> <a class="anchor-link"
            href="#id"
            title="Permalink to OsmTileLayer.id">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>replies the unique numeric id for this layer</p>
<pre class="source">
int get id =&gt; _nid;
</pre>
</div>
</div>
<div class="field inherited"><h4 id="map">
<button class="show-code">Code</button>
final <a href="../dartkart.map/MapViewport.html">MapViewport</a>         <strong>map</strong> <a class="anchor-link"
            href="#map"
            title="Permalink to OsmTileLayer.map">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>the map this layer is attached to, or null</p>
<pre class="source">
MapViewport get map =&gt; _map;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="name">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>get name</strong> <a class="anchor-link" href="#name"
              title="Permalink to OsmTileLayer.get name">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>the layer name</p>
<pre class="source">
String get name =&gt; _name;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="name=">
<button class="show-code">Code</button>
<strong>set name</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> value) <a class="anchor-link" href="#name="
              title="Permalink to OsmTileLayer.set name">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>sets the layer name. If 
<span class="param">value</span> is null or white space only,
chooses a default name.</p>
<pre class="source">
set name(String value) {
 if (value != null) value = value.trim();
 var old = _name;
 if (value == null || value.isEmpty) {
   _name = "Layer ${_nextLayerId}";
 } else {
   _name = value;
 }
 notify("name", old, _name);
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="onPropertyChanged">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_async/Stream.html">Stream</a>&lt;<a href="../dartkart.core/PropertyChangeEvent.html">PropertyChangeEvent</a>&gt;         <strong>onPropertyChanged</strong> <a class="anchor-link"
            href="#onPropertyChanged"
            title="Permalink to OsmTileLayer.onPropertyChanged">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<pre class="source">
Stream&lt;PropertyChangeEvent&gt; get onPropertyChanged =&gt;
   _controller.stream;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="opacity">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/double.html">double</a> <strong>get opacity</strong> <a class="anchor-link" href="#opacity"
              title="Permalink to OsmTileLayer.get opacity">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>the opacity of this layer</p>
<pre class="source">
double get opacity =&gt; _opacity;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="opacity=">
<button class="show-code">Code</button>
<strong>set opacity</strong>(<a href="http://api.dartlang.org/dart_core/num.html">num</a> value) <a class="anchor-link" href="#opacity="
              title="Permalink to OsmTileLayer.set opacity">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>set the opacity of this layer. 
<span class="param">value</span> is a <code>num</code> in the range
(0.0 - 1.0). The lower the value, the more transparent the layer.</p>
<pre class="source">
set opacity(num value) {
 value = math.max(0, value);
 value = math.min(value, 1);
 var oldvalue = _opacity;
 this._opacity = value.toDouble();
 if (oldvalue != this._opacity) {
   notify("opacity", oldvalue, this._opacity);
   if (_map != null) {
     _map.render();
   }
 }
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="tileSize">
<button class="show-code">Code</button>
final <a href="../dartkart.geometry/Point.html">Point</a>         <strong>tileSize</strong> <a class="anchor-link"
            href="#tileSize"
            title="Permalink to OsmTileLayer.tileSize">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dartkart.layer/TileLayer.html">TileLayer</a> </div><div class="doc">
<p>The tile size used by this tile layer. Replies a
<code>Point</code>, <code>x</code> is the tile width, <code>y</code> the tile
heigth.</p>
<pre class="source">
Point get tileSize =&gt; DEFAULT_TILE_SIZE;
</pre>
</div>
</div>
<div class="method"><h4 id="tileSources">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/List.html">List</a> <strong>get tileSources</strong> <a class="anchor-link" href="#tileSources"
              title="Permalink to OsmTileLayer.get tileSources">#</a></h4>
<div class="doc">
<p>the list of tile sources this layer uses</p>
<pre class="source">
List get tileSources =&gt; new List.from(_tileSources);
</pre>
</div>
</div>
<div class="method"><h4 id="tileSources=">
<button class="show-code">Code</button>
<strong>set tileSources</strong>(sources) <a class="anchor-link" href="#tileSources="
              title="Permalink to OsmTileLayer.set tileSources">#</a></h4>
<div class="doc">
<p>Set the tile sources where tiles are loaded from.</p>
<p>
<span class="param">sources</span> can be
  * <code>null</code> which results in an empty list of tile sources
  * a <code>String</code> with a tile URL template
  * a <code>List</code> of strings, a tile URL template each</p>
<p>A <em>tile URL template</em> is a string which can include the following
macros:
  * <code>{z}</code> -  bound to the current zoom level when a tile is loaded
  * <code>{x}</code> -  bound to the x-coordiate of the tile when a tile is loaded
  * <code>{y}</code> -  bound to the y-coordiate of the tile when a tile is loaded</p>
<pre class="source">
set tileSources(sources) {
 if (sources == null) {
   _tileSources = [];
 } else  if (sources is String) {
   _tileSources = [sources];
 } else if (sources is List) {
   sources = sources.where((s) =&gt; s != null);
   if (sources.any((s) =&gt; s is! String)) {
     throw new ArgumentError("Expected list tile source strings, got sources");
   }
   _tileSources = new List.from(sources);
 }
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="visible">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> <strong>get visible</strong> <a class="anchor-link" href="#visible"
              title="Permalink to OsmTileLayer.get visible">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>the layer visibility</p>
<pre class="source">
bool get visible =&gt; _visible;
</pre>
</div>
</div>
<div class="method inherited"><h4 id="visible=">
<button class="show-code">Code</button>
<strong>set visible</strong>(<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> value) <a class="anchor-link" href="#visible="
              title="Permalink to OsmTileLayer.set visible">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>sets whether this layer is visible or not</p>
<pre class="source">
set visible(bool value) {
 var old = _visible;
 if (value != old) {
   if (_container != null) {
     _container.style.visibility =
         value ? "visible" : "hidden";
   }
   _visible = value;
   notify("visible", old, value);
 }
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method inherited"><h4 id="attach">
<button class="show-code">Code</button>
<strong>attach</strong>(<a href="../dartkart.map/MapViewport.html">MapViewport</a> m) <a class="anchor-link" href="#attach"
              title="Permalink to OsmTileLayer.attach">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/TileLayer.html">TileLayer</a> </div><div class="doc">
<div class="inherited">
<p>Attaches the layer to a map viewport 
<span class="param">m</span>.</p>
<p>Throws <code>StateError</code> if this layer is already attached.</p>
<div class="docs-inherited-from">docs inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div></div>
<pre class="source">
attach(MapViewport m) {
 super.attach(m);
 var viewportSize = map.viewportSize;
 var tl = map.topLeftInPage;
 _container.style
   ..width="100%"
   ..height="100%"
   ..position = "absolute"
   ..left = "0px"
   ..top = "0px";
}
</pre>
</div>
</div>
<div class="method"><h4 id="bindTileToUrl">
<button class="show-code">Code</button>
<strong>bindTileToUrl</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> x, <a href="http://api.dartlang.org/dart_core/int.html">int</a> y, <a href="http://api.dartlang.org/dart_core/int.html">int</a> zoom) <a class="anchor-link" href="#bindTileToUrl"
              title="Permalink to OsmTileLayer.bindTileToUrl">#</a></h4>
<div class="doc">
<pre class="source">
bindTileToUrl(int x, int y, int zoom) {
 var source = _randomTileSource;
 return source.splitMapJoin(
   _TEMPLATE_BIND_REGEXP,
   onMatch: (Match m) {
     switch(m.group(1).toLowerCase()) {
       case "x": return x.toString();
       case "y": return y.toString();
       case "z": return zoom.toString();
     }
 });
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="detach">
<button class="show-code">Code</button>
<strong>detach</strong>() <a class="anchor-link" href="#detach"
              title="Permalink to OsmTileLayer.detach">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<p>Detaches this layer from the map viewport it is
currently attached to.</p>
<pre class="source">
detach(){
 _map = null;
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="notify">
<button class="show-code">Code</button>
<strong>notify</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> property, oldValue, newValue) <a class="anchor-link" href="#notify"
              title="Permalink to OsmTileLayer.notify">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div><div class="doc">
<pre class="source">
notify(String property, oldValue, newValue) {
 if (oldValue == newValue) return;
 _controller.sink.add(
     new PropertyChangeEvent(this, property, oldValue,newValue)
  );
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="render">
<button class="show-code">Code</button>
<strong>render</strong>() <a class="anchor-link" href="#render"
              title="Permalink to OsmTileLayer.render">#</a></h4>
<div class="inherited-from">inherited from <a href="../dartkart.layer/TileLayer.html">TileLayer</a> </div><div class="doc">
<div class="inherited">
<p>Renders the layer.</p>
<div class="docs-inherited-from">docs inherited from <a href="../dartkart.layer/Layer.html">Layer</a> </div></div>
<pre class="source">
render() {
 if (!visible) return;
 _renderer.render();
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-03-17 10:09:09.036</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
